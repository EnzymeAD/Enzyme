name: Bazel

on:
  schedule:
    - cron: 0 0 * * *
  push:
    branches:
    - main
  pull_request:
    branches:
    - main
  merge_group:

jobs:
  build-linux:
    name: Bazel ${{ matrix.build }} ${{ matrix.os }}
    runs-on: ${{ matrix.os }}
    
    strategy:
      fail-fast: false
      matrix:
        build: ["Release"]
        llbuild: ["Release"]
        os: [ubuntu-latest]
  
    timeout-minutes: 500 
    steps:
    
    - uses: actions/checkout@v4
    - uses: actions/checkout@v4
      with:
        repository: 'llvm/llvm-project'
        path: 'llvm-project'

    - name: cmake
      run: |
          cd enzyme
          bazel build :EnzymeStatic 
