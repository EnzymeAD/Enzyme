# Public read-only cache
common:public_cache --remote_cache="https://storage.googleapis.com/enzyme-presubmit-bazel-cache/" --remote_upload_local_results=false

# Cache pushes are limited to Enzyme's CI system.
common:public_cache_push --config=public_cache --remote_upload_local_results=true --google_default_credentials

build --announce_rc

build --experimental_repo_remote_exec
build --cxxopt=-std=c++17 --host_cxxopt=-std=c++17
build --cxxopt=-w --host_cxxopt=-w
#build --features=external_include_paths

build --define=grpc_no_ares=true
build --define=tsl_link_protobuf=true
build --define open_source_build=true

build --define framework_shared_object=true
build --define tsl_protobuf_header_only=true
build --define=use_fast_cpp_protos=true
build --define=allow_oversize_protos=true

build -c opt

